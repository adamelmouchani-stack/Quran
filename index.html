<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- Favicon (kleine icoon in browser tab) -->
<link rel="icon" type="image/png" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Ccircle cx='50' cy='50' r='45' fill='%23eab308'/%3E%3Ctext x='50' y='70' font-size='60' text-anchor='middle' fill='white' font-family='Amiri'%3Eï·½%3C/text%3E%3C/svg%3E">

<title>Quran</title>

<!-- Tailwind CSS -->
<script src="https://cdn.tailwindcss.com"></script>
<script>
  tailwind.config = { darkMode: 'class' }
</script>

<!-- Google Fonts -->
<link href="https://fonts.googleapis.com/css2?family=Amiri:wght@400;700&family=Poppins:wght@400;600&display=swap" rel="stylesheet">

<!-- Font Awesome -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">

<style>
  body { font-family: 'Poppins', sans-serif; }
  
  /* Header styling - EENVOUDIG ZONDER LOGO */
  .header {
    background: white;
    box-shadow: 0 2px 10px rgba(0,0,0,0.05);
    padding: 12px 0;
  }
  
  .dark .header {
    background: #1f2937;
    box-shadow: 0 2px 10px rgba(0,0,0,0.2);
  }
  
  /* Modal styling voor clear last read */
  .modal {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0,0,0,0.5);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 1000;
    opacity: 0;
    visibility: hidden;
    transition: all 0.3s;
  }
  
  .modal.show {
    opacity: 1;
    visibility: visible;
  }
  
  .modal-content {
    background: white;
    border-radius: 20px;
    width: 90%;
    max-width: 400px;
    padding: 30px;
    transform: scale(0.9);
    transition: transform 0.3s;
  }
  
  .dark .modal-content {
    background: #1f2937;
    color: white;
  }
  
  .modal.show .modal-content {
    transform: scale(1);
  }
  
  .modal-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 20px;
  }
  
  .modal-header h2 {
    font-size: 24px;
    font-weight: bold;
    color: #eab308;
  }
  
  .close-modal {
    width: 30px;
    height: 30px;
    border-radius: 50%;
    background: #e5e7eb;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: all 0.2s;
  }
  
  .dark .close-modal {
    background: #4b5563;
    color: white;
  }
  
  .close-modal:hover {
    background: #eab308;
    color: white;
  }
  
  .modal-btn {
    width: 100%;
    padding: 12px;
    background: #ef4444;
    color: white;
    border: none;
    border-radius: 10px;
    font-weight: bold;
    cursor: pointer;
    transition: all 0.2s;
  }
  
  .modal-btn:hover {
    background: #dc2626;
    transform: scale(1.02);
  }
  
  /* Welkomstbericht */
  .welcome-message {
    background: linear-gradient(135deg, #fef9e7 0%, #ffffff 100%);
    border-radius: 15px;
    padding: 20px;
    margin-bottom: 20px;
  }
  
  .dark .welcome-message {
    background: linear-gradient(135deg, #1f2937 0%, #111827 100%);
  }
  
  /* Arabische tekst */
  .arabic-text {
    font-family: 'Amiri', serif;
    font-size: clamp(1.6rem, 5vw, 2.2rem);
    direction: rtl;
  }
  
  /* Soera kaarten */
  .surah-card {
    background: white;
    border-radius: 15px;
    padding: 20px;
    cursor: pointer;
    transition: all 0.3s;
    border: 1px solid transparent;
  }
  
  .dark .surah-card {
    background: #1f2937;
  }
  
  .surah-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 10px 25px -5px rgba(0,0,0,0.2);
    border-color: #eab308;
  }
  
  /* Laatst gelezen marker */
  .last-read {
    border-left: 4px solid #eab308;
    background: rgba(234, 179, 8, 0.05);
  }
  
  /* Loading spinner */
  .loading-spinner {
    width: 50px;
    height: 50px;
    border: 4px solid #f3f3f3;
    border-top: 4px solid #eab308;
    border-radius: 50%;
    animation: spin 1s linear infinite;
    margin: 40px auto;
  }
  
  @keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
  }
  
  /* Footer styling */
  .footer {
    background: white;
    border-top: 1px solid #e5e7eb;
    padding: 30px 0;
    margin-top: 50px;
  }
  
  .dark .footer {
    background: #1f2937;
    border-color: #374151;
  }
  
  .support-email {
    display: inline-flex;
    align-items: center;
    gap: 10px;
    padding: 12px 25px;
    background: #eab308;
    color: #1e293b;
    border-radius: 50px;
    font-weight: bold;
    transition: all 0.3s;
  }
  
  .support-email:hover {
    background: #fbbf24;
    transform: scale(1.05);
    box-shadow: 0 10px 20px -5px rgba(234, 179, 8, 0.5);
  }
  
  .support-email i {
    font-size: 20px;
  }
  
  /* Clear last read knop */
  .clear-btn {
    color: #6b7280;
    transition: all 0.2s;
    cursor: pointer;
  }
  
  .clear-btn:hover {
    color: #ef4444;
  }
</style>
</head>

<body class="bg-gray-100 text-gray-900 dark:bg-gray-900 dark:text-gray-100">

<!-- ========== EENVOUDIGE HEADER ZONDER LOGO ========== -->
<header class="header">
  <div class="max-w-7xl mx-auto px-4">
    <div class="flex flex-wrap justify-between items-center gap-2">
      <!-- Alleen tekst, geen logo -->
      <h1 class="text-2xl font-bold" id="headerTitle">Quran</h1>
      
      <!-- Taal en thema rechts -->
      <div class="flex gap-2 items-center">
        <select id="languageSelect" class="px-2 py-1 border rounded text-sm bg-white dark:bg-gray-700 dark:text-white">
          <option value="arabic">ðŸ‡¸ðŸ‡¦ Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</option>
          <option value="nl">ðŸ‡³ðŸ‡± Nederlands</option>
          <option value="en">ðŸ‡¬ðŸ‡§ English</option>
        </select>
        <button id="themeBtn" class="w-10 h-10 rounded-full bg-gray-200 dark:bg-gray-700 hover:bg-amber-500 transition-all">
          <i class="fas fa-moon dark:hidden"></i>
          <i class="fas fa-sun hidden dark:inline"></i>
        </button>
      </div>
    </div>
  </div>
</header>

<main class="max-w-7xl mx-auto px-4 py-6">

  <!-- Welkomstbericht - verandert met taal -->
  <div class="welcome-message">
    <div class="flex items-center gap-3">
      <i class="fas fa-book-open text-amber-500 text-3xl"></i>
      <div>
        <h2 class="text-xl font-bold" id="welcomeTitle">Welkom bij Quran</h2>
        <p class="text-gray-600 dark:text-gray-400" id="welcomeText">Klik op een soera om te beginnen met lezen</p>
      </div>
    </div>
  </div>

  <!-- Clear last read knop (alleen zichtbaar als er een marker is) -->
  <div class="text-right mb-4">
    <button id="clearLastReadBtn" class="clear-btn text-sm hidden">
      <i class="fas fa-trash-alt mr-1"></i> <span id="clearBtnText">Clear last read marker</span>
    </button>
  </div>

  <!-- Laad spinner -->
  <div id="loadingSpinner" class="loading-spinner hidden"></div>

  <!-- Soera lijst -->
  <div id="surahList" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4"></div>

  <!-- Soera pagina -->
  <div id="surahPage" class="hidden">
    <button id="backBtn" class="mb-4 px-4 py-2 rounded-full bg-gray-200 dark:bg-gray-700 hover:bg-amber-500 transition-all">
      <i class="fas fa-arrow-left mr-1"></i> <span id="backText">Terug</span>
    </button>

    <div class="bg-gradient-to-r from-amber-50 to-yellow-50 dark:from-gray-800 dark:to-gray-800 rounded-2xl p-6 mb-6">
      <h2 id="surahTitle" class="text-3xl font-bold mb-1"></h2>
      <p id="surahInfo" class="text-gray-600 dark:text-gray-400 mb-2"></p>
      <p id="lastReadInfo" class="text-sm text-amber-600 dark:text-amber-400"></p>
    </div>

    <div class="bg-white dark:bg-gray-800 rounded-xl p-4 mb-6">
      <audio id="surahAudio" controls class="w-full"></audio>
    </div>

    <div id="surahText" class="space-y-4"></div>
  </div>

</main>

<!-- ========== CONFIRMATIE MODAL VOOR CLEAR LAST READ ========== -->
<div id="confirmModal" class="modal">
  <div class="modal-content">
    <div class="modal-header">
      <h2><i class="fas fa-trash-alt text-amber-500 mr-2"></i> <span id="modalTitle">Bevestigen</span></h2>
      <div class="close-modal" id="closeConfirmModal">
        <i class="fas fa-times"></i>
      </div>
    </div>
    
    <p class="mb-6 text-center" id="modalText">Weet je zeker dat je de last read marker wilt verwijderen?</p>
    
    <button id="confirmClearBtn" class="modal-btn">
      <i class="fas fa-check mr-2"></i> <span id="confirmBtnText">Ja, verwijder</span>
    </button>
  </div>
</div>

<!-- ========== FOOTER MET SUPPORT MAIL ========== -->
<footer class="footer">
  <div class="max-w-7xl mx-auto px-4 text-center">
    <h3 class="text-lg font-semibold mb-4" id="supportTitle">Heb je vragen of hulp nodig?</h3>
    
    <a href="mailto:elmouchania@hotmail.com" class="support-email">
      <i class="fas fa-envelope"></i>
      <span>elmouchania@hotmail.com</span>
    </a>
    
    <div class="mt-6 text-sm text-gray-500 dark:text-gray-400">
      <p>Â© 2026 Quran. Alle rechten voorbehouden.</p>
      <p class="mt-1" id="responseTime">Antwoord binnen 24 uur op werkdagen</p>
    </div>
  </div>
</footer>

<script>
// ========== STATE ==========
let currentLanguage = 'nl'; // Standaard Nederlands
let currentSurahId = null;

// ========== DOM ELEMENTEN ==========
const clearLastReadBtn = document.getElementById('clearLastReadBtn');
const confirmModal = document.getElementById('confirmModal');
const closeConfirmModal = document.getElementById('closeConfirmModal');
const confirmClearBtn = document.getElementById('confirmClearBtn');

// ========== TALEN ==========
const translations = {
  arabic: {
    headerTitle: "Ø§Ù„Ù‚Ø±Ø¢Ù†",
    back: "Ø±Ø¬ÙˆØ¹",
    verses: "Ø¢ÙŠØ§Øª",
    welcomeTitle: "Ù…Ø±Ø­Ø¨Ù‹Ø§ Ø¨Ùƒ ÙÙŠ Ø§Ù„Ù‚Ø±Ø¢Ù†",
    welcomeText: "Ø§Ù†Ù‚Ø± Ø¹Ù„Ù‰ Ø³ÙˆØ±Ø© Ù„Ø¨Ø¯Ø¡ Ø§Ù„Ù‚Ø±Ø§Ø¡Ø©",
    clearBtn: "Ù…Ø³Ø­ Ø¹Ù„Ø§Ù…Ø© Ø¢Ø®Ø± Ù‚Ø±Ø§Ø¡Ø©",
    modalTitle: "ØªØ£ÙƒÙŠØ¯",
    modalText: "Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ø£Ù†Ùƒ ØªØ±ÙŠØ¯ Ù…Ø³Ø­ Ø¹Ù„Ø§Ù…Ø© Ø¢Ø®Ø± Ù‚Ø±Ø§Ø¡Ø©ØŸ",
    confirmBtn: "Ù†Ø¹Ù…ØŒ Ù…Ø³Ø­",
    supportTitle: "Ù‡Ù„ Ù„Ø¯ÙŠÙƒ Ø£Ø³Ø¦Ù„Ø© Ø£Ùˆ ØªØ­ØªØ§Ø¬ Ù…Ø³Ø§Ø¹Ø¯Ø©ØŸ",
    responseTime: "Ø§Ù„Ø±Ø¯ Ø®Ù„Ø§Ù„ 24 Ø³Ø§Ø¹Ø© ÙÙŠ Ø£ÙŠØ§Ù… Ø§Ù„Ø¹Ù…Ù„",
    lastRead: "Ø¢Ø®Ø± Ù‚Ø±Ø§Ø¡Ø©: Ø¢ÙŠØ©"
  },
  nl: {
    headerTitle: "Quran",
    back: "Terug",
    verses: "verzen",
    welcomeTitle: "Welkom bij Quran",
    welcomeText: "Klik op een soera om te beginnen met lezen",
    clearBtn: "Clear last read marker",
    modalTitle: "Bevestigen",
    modalText: "Weet je zeker dat je de last read marker wilt verwijderen?",
    confirmBtn: "Ja, verwijder",
    supportTitle: "Heb je vragen of hulp nodig?",
    responseTime: "Antwoord binnen 24 uur op werkdagen",
    lastRead: "Laatst gelezen: vers"
  },
  en: {
    headerTitle: "Quran",
    back: "Back",
    verses: "verses",
    welcomeTitle: "Welcome to Quran",
    welcomeText: "Click on a surah to start reading",
    clearBtn: "Clear last read marker",
    modalTitle: "Confirm",
    modalText: "Are you sure you want to clear the last read marker?",
    confirmBtn: "Yes, clear",
    supportTitle: "Do you have questions or need help?",
    responseTime: "Reply within 24 hours on weekdays",
    lastRead: "Last read: verse"
  }
};

// ========== SOERA NAMEN ==========
const latinSuraNames = [
  "Al-Fatiha", "Al-Baqara", "Aal-E-Imran", "An-Nisa", "Al-Ma'idah",
  "Al-An'am", "Al-A'raf", "Al-Anfal", "At-Tawbah", "Yunus",
  "Hud", "Yusuf", "Ar-Ra'd", "Ibrahim", "Al-Hijr",
  "An-Nahl", "Al-Isra", "Al-Kahf", "Maryam", "Ta-Ha",
  "Al-Anbiya", "Al-Hajj", "Al-Mu'minun", "An-Nur", "Al-Furqan",
  "Ash-Shu'ara", "An-Naml", "Al-Qasas", "Al-Ankabut", "Ar-Rum",
  "Luqman", "As-Sajda", "Al-Ahzab", "Saba", "Fatir",
  "Ya-Sin", "As-Saffat", "Sad", "Az-Zumar", "Ghafir",
  "Fussilat", "Ash-Shura", "Az-Zukhruf", "Ad-Dukhan", "Al-Jathiya",
  "Al-Ahqaf", "Muhammad", "Al-Fath", "Al-Hujurat", "Qaf",
  "Adh-Dhariyat", "At-Tur", "An-Najm", "Al-Qamar", "Ar-Rahman",
  "Al-Waqia", "Al-Hadid", "Al-Mujadila", "Al-Hashr", "Al-Mumtahina",
  "As-Saff", "Al-Jumu'a", "Al-Munafiqun", "At-Taghabun", "At-Talaq",
  "At-Tahrim", "Al-Mulk", "Al-Qalam", "Al-Haqqa", "Al-Ma'arij",
  "Nuh", "Al-Jinn", "Al-Muzzammil", "Al-Muddaththir", "Al-Qiyama",
  "Al-Insan", "Al-Mursalat", "An-Naba", "An-Nazi'at", "Abasa",
  "At-Takwir", "Al-Infitar", "Al-Mutaffifin", "Al-Inshiqaq", "Al-Buruj",
  "At-Tariq", "Al-A'la", "Al-Ghashiya", "Al-Fajr", "Al-Balad",
  "Ash-Shams", "Al-Lail", "Ad-Duha", "Ash-Sharh", "At-Tin",
  "Al-Alaq", "Al-Qadr", "Al-Bayyina", "Az-Zalzala", "Al-Adiyat",
  "Al-Qaria", "At-Takathur", "Al-Asr", "Al-Humaza", "Al-Fil",
  "Quraish", "Al-Ma'un", "Al-Kawthar", "Al-Kafirun", "An-Nasr",
  "Al-Masad", "Al-Ikhlas", "Al-Falaq", "An-Nas"
];

const arabicSuraNames = [
  "Ø§Ù„ÙØ§ØªØ­Ø©", "Ø§Ù„Ø¨Ù‚Ø±Ø©", "Ø¢Ù„ Ø¹Ù…Ø±Ø§Ù†", "Ø§Ù„Ù†Ø³Ø§Ø¡", "Ø§Ù„Ù…Ø§Ø¦Ø¯Ø©",
  "Ø§Ù„Ø£Ù†Ø¹Ø§Ù…", "Ø§Ù„Ø£Ø¹Ø±Ø§Ù", "Ø§Ù„Ø£Ù†ÙØ§Ù„", "Ø§Ù„ØªÙˆØ¨Ø©", "ÙŠÙˆÙ†Ø³",
  "Ù‡ÙˆØ¯", "ÙŠÙˆØ³Ù", "Ø§Ù„Ø±Ø¹Ø¯", "Ø¥Ø¨Ø±Ø§Ù‡ÙŠÙ…", "Ø§Ù„Ø­Ø¬Ø±",
  "Ø§Ù„Ù†Ø­Ù„", "Ø§Ù„Ø¥Ø³Ø±Ø§Ø¡", "Ø§Ù„ÙƒÙ‡Ù", "Ù…Ø±ÙŠÙ…", "Ø·Ù‡",
  "Ø§Ù„Ø£Ù†Ø¨ÙŠØ§Ø¡", "Ø§Ù„Ø­Ø¬", "Ø§Ù„Ù…Ø¤Ù…Ù†ÙˆÙ†", "Ø§Ù„Ù†ÙˆØ±", "Ø§Ù„ÙØ±Ù‚Ø§Ù†",
  "Ø§Ù„Ø´Ø¹Ø±Ø§Ø¡", "Ø§Ù„Ù†Ù…Ù„", "Ø§Ù„Ù‚ØµØµ", "Ø§Ù„Ø¹Ù†ÙƒØ¨ÙˆØª", "Ø§Ù„Ø±ÙˆÙ…",
  "Ù„Ù‚Ù…Ø§Ù†", "Ø§Ù„Ø³Ø¬Ø¯Ø©", "Ø§Ù„Ø£Ø­Ø²Ø§Ø¨", "Ø³Ø¨Ø¥", "ÙØ§Ø·Ø±",
  "ÙŠØ³", "Ø§Ù„ØµØ§ÙØ§Øª", "Øµ", "Ø§Ù„Ø²Ù…Ø±", "ØºØ§ÙØ±",
  "ÙØµÙ„Øª", "Ø§Ù„Ø´ÙˆØ±Ù‰", "Ø§Ù„Ø²Ø®Ø±Ù", "Ø§Ù„Ø¯Ø®Ø§Ù†", "Ø§Ù„Ø¬Ø§Ø«ÙŠØ©",
  "Ø§Ù„Ø£Ø­Ù‚Ø§Ù", "Ù…Ø­Ù…Ø¯", "Ø§Ù„ÙØªØ­", "Ø§Ù„Ø­Ø¬Ø±Ø§Øª", "Ù‚",
  "Ø§Ù„Ø°Ø§Ø±ÙŠØ§Øª", "Ø§Ù„Ø·ÙˆØ±", "Ø§Ù„Ù†Ø¬Ù…", "Ø§Ù„Ù‚Ù…Ø±", "Ø§Ù„Ø±Ø­Ù…Ù†",
  "Ø§Ù„ÙˆØ§Ù‚Ø¹Ø©", "Ø§Ù„Ø­Ø¯ÙŠØ¯", "Ø§Ù„Ù…Ø¬Ø§Ø¯Ù„Ø©", "Ø§Ù„Ø­Ø´Ø±", "Ø§Ù„Ù…Ù…ØªØ­Ù†Ø©",
  "Ø§Ù„ØµÙ", "Ø§Ù„Ø¬Ù…Ø¹Ø©", "Ø§Ù„Ù…Ù†Ø§ÙÙ‚ÙˆÙ†", "Ø§Ù„ØªØºØ§Ø¨Ù†", "Ø§Ù„Ø·Ù„Ø§Ù‚",
  "Ø§Ù„ØªØ­Ø±ÙŠÙ…", "Ø§Ù„Ù…Ù„Ùƒ", "Ø§Ù„Ù‚Ù„Ù…", "Ø§Ù„Ø­Ø§Ù‚Ø©", "Ø§Ù„Ù…Ø¹Ø§Ø±Ø¬",
  "Ù†ÙˆØ­", "Ø§Ù„Ø¬Ù†", "Ø§Ù„Ù…Ø²Ù…Ù„", "Ø§Ù„Ù…Ø¯Ø«Ø±", "Ø§Ù„Ù‚ÙŠØ§Ù…Ø©",
  "Ø§Ù„Ø¥Ù†Ø³Ø§Ù†", "Ø§Ù„Ù…Ø±Ø³Ù„Ø§Øª", "Ø§Ù„Ù†Ø¨Ø¥", "Ø§Ù„Ù†Ø§Ø²Ø¹Ø§Øª", "Ø¹Ø¨Ø³",
  "Ø§Ù„ØªÙƒÙˆÙŠØ±", "Ø§Ù„Ø¥Ù†ÙØ·Ø§Ø±", "Ø§Ù„Ù…Ø·ÙÙÙŠÙ†", "Ø§Ù„Ø¥Ù†Ø´Ù‚Ø§Ù‚", "Ø§Ù„Ø¨Ø±ÙˆØ¬",
  "Ø§Ù„Ø·Ø§Ø±Ù‚", "Ø§Ù„Ø£Ø¹Ù„Ù‰", "Ø§Ù„ØºØ§Ø´ÙŠØ©", "Ø§Ù„ÙØ¬Ø±", "Ø§Ù„Ø¨Ù„Ø¯",
  "Ø§Ù„Ø´Ù…Ø³", "Ø§Ù„Ù„ÙŠÙ„", "Ø§Ù„Ø¶Ø­Ù‰", "Ø§Ù„Ø´Ø±Ø­", "Ø§Ù„ØªÙŠÙ†",
  "Ø§Ù„Ø¹Ù„Ù‚", "Ø§Ù„Ù‚Ø¯Ø±", "Ø§Ù„Ø¨ÙŠÙ†Ø©", "Ø§Ù„Ø²Ù„Ø²Ù„Ø©", "Ø§Ù„Ø¹Ø§Ø¯ÙŠØ§Øª",
  "Ø§Ù„Ù‚Ø§Ø±Ø¹Ø©", "Ø§Ù„ØªÙƒØ§Ø«Ø±", "Ø§Ù„Ø¹ØµØ±", "Ø§Ù„Ù‡Ù…Ø²Ø©", "Ø§Ù„ÙÙŠÙ„",
  "Ù‚Ø±ÙŠØ´", "Ø§Ù„Ù…Ø§Ø¹ÙˆÙ†", "Ø§Ù„ÙƒÙˆØ«Ø±", "Ø§Ù„ÙƒØ§ÙØ±ÙˆÙ†", "Ø§Ù„Ù†ØµØ±",
  "Ø§Ù„Ù…Ø³Ø¯", "Ø§Ù„Ø¥Ø®Ù„Ø§Øµ", "Ø§Ù„ÙÙ„Ù‚", "Ø§Ù„Ù†Ø§Ø³"
];

// ========== FUNCTIE OM UI TE UPDATEN OP BASIS VAN TAAL ==========
function updateUILanguage() {
  document.getElementById('headerTitle').textContent = translations[currentLanguage].headerTitle;
  document.getElementById('backText').textContent = translations[currentLanguage].back;
  document.getElementById('welcomeTitle').textContent = translations[currentLanguage].welcomeTitle;
  document.getElementById('welcomeText').textContent = translations[currentLanguage].welcomeText;
  document.getElementById('clearBtnText').textContent = translations[currentLanguage].clearBtn;
  document.getElementById('supportTitle').textContent = translations[currentLanguage].supportTitle;
  document.getElementById('responseTime').textContent = translations[currentLanguage].responseTime;
  
  // Modal teksten
  document.getElementById('modalTitle').textContent = translations[currentLanguage].modalTitle;
  document.getElementById('modalText').textContent = translations[currentLanguage].modalText;
  document.getElementById('confirmBtnText').textContent = translations[currentLanguage].confirmBtn;
  
  // Update lastReadInfo als die zichtbaar is
  if (currentSurahId) {
    const savedAyah = localStorage.getItem(`lastRead-${currentSurahId}`);
    if (savedAyah) {
      document.getElementById('lastReadInfo').textContent = 
        `${translations[currentLanguage].lastRead} ${savedAyah}`;
    }
  }
}

// ========== LAAD SOERA LIJST ==========
async function loadSurahList() {
  const surahList = document.getElementById('surahList');
  const loadingSpinner = document.getElementById('loadingSpinner');
  
  loadingSpinner.classList.remove('hidden');
  surahList.innerHTML = '';
  
  try {
    const response = await fetch("https://api.alquran.cloud/v1/surah");
    const data = await response.json();
    
    data.data.forEach((surah, index) => {
      const card = document.createElement("div");
      card.className = "surah-card";

      let title = '';
      
      if (currentLanguage === 'arabic') {
        title = `<div class="arabic-text text-2xl mb-2">${arabicSuraNames[index] || surah.name}</div>`;
      } else {
        title = `<h3 class="font-bold text-lg">${surah.number}. ${latinSuraNames[index] || surah.englishName}</h3>`;
      }

      card.innerHTML = `
        ${title}
        <div class="mt-2 text-sm text-gray-500">${surah.numberOfAyahs} ${translations[currentLanguage].verses}</div>
        ${currentLanguage !== 'arabic' ? `<div class="arabic-text text-right text-sm mt-2">${arabicSuraNames[index] || surah.name}</div>` : ''}
      `;

      card.onclick = () => openSurah(surah.number);
      surahList.appendChild(card);
    });
  } catch (error) {
    surahList.innerHTML = '<div class="col-span-full text-center text-red-500">Fout bij laden</div>';
  }
  
  loadingSpinner.classList.add('hidden');
}

// ========== OPEN SURAH ==========
async function openSurah(id) {
  currentSurahId = id;
  
  document.getElementById('surahList').classList.add('hidden');
  document.getElementById('surahPage').classList.remove('hidden');
  
  const loadingSpinner = document.getElementById('loadingSpinner');
  loadingSpinner.classList.remove('hidden');
  
  try {
    const response = await fetch(`https://api.alquran.cloud/v1/surah/${id}`);
    const data = await response.json();
    const s = data.data;
    const index = s.number - 1;

    // Toon soera informatie
    let title = '';
    if (currentLanguage === 'arabic') {
      title = `${s.number}. ${arabicSuraNames[index] || s.name}`;
    } else {
      title = `${s.number}. ${latinSuraNames[index] || s.englishName}`;
    }
    
    document.getElementById('surahTitle').textContent = title;
    document.getElementById('surahInfo').textContent = `${s.numberOfAyahs} ${translations[currentLanguage].verses}`;
    document.getElementById('surahAudio').src = `https://cdn.islamic.network/quran/audio-surah/128/ar.alafasy/${id}.mp3`;

    // Laatst gelezen vers
    const savedAyah = localStorage.getItem(`lastRead-${id}`);
    const lastReadEl = document.getElementById('lastReadInfo');
    lastReadEl.textContent = savedAyah
      ? `${translations[currentLanguage].lastRead} ${savedAyah}`
      : "";
    
    // Toon clear knop als er een marker is
    if (savedAyah) {
      clearLastReadBtn.classList.remove('hidden');
    } else {
      clearLastReadBtn.classList.add('hidden');
    }

    const surahText = document.getElementById('surahText');
    surahText.innerHTML = '';

    s.ayahs.forEach(a => {
      const d = document.createElement('div');
      d.className = "verse-container bg-white dark:bg-gray-800 rounded-lg p-4 cursor-pointer hover:border-amber-500 border border-transparent transition-all";
      
      // Voeg last-read class toe als dit het opgeslagen vers is
      if (savedAyah == a.numberInSurah) {
        d.classList.add('last-read');
        setTimeout(() => d.scrollIntoView({ behavior: "smooth", block: "center" }), 300);
      }

      d.innerHTML = `
        <div class="arabic-text">${a.text}</div>
        <div class="text-xs text-gray-500 mt-2">${currentLanguage === 'arabic' ? 'Ø¢ÙŠØ©' : 'Vers'} ${a.numberInSurah}</div>
      `;

      d.onclick = () => {
        const key = `lastRead-${id}`;
        const currentLastRead = localStorage.getItem(key);
        
        if (currentLastRead == a.numberInSurah) {
          localStorage.removeItem(key);
        } else {
          localStorage.setItem(key, a.numberInSurah);
        }
        
        openSurah(id);
      };

      surahText.appendChild(d);
    });
    
  } catch (error) {
    document.getElementById('surahText').innerHTML = '<div class="text-red-500">Fout bij laden</div>';
  }
  
  loadingSpinner.classList.add('hidden');
}

// ========== TERUG KNOP ==========
document.getElementById('backBtn').addEventListener('click', () => {
  document.getElementById('surahPage').classList.add('hidden');
  document.getElementById('surahList').classList.remove('hidden');
  currentSurahId = null;
});

// ========== CLEAR LAST READ ==========
clearLastReadBtn.addEventListener('click', () => {
  confirmModal.classList.add('show');
});

closeConfirmModal.addEventListener('click', () => {
  confirmModal.classList.remove('show');
});

confirmClearBtn.addEventListener('click', () => {
  if (currentSurahId) {
    localStorage.removeItem(`lastRead-${currentSurahId}`);
    openSurah(currentSurahId);
    confirmModal.classList.remove('show');
  }
});

// Klik buiten modal sluiten
window.addEventListener('click', (e) => {
  if (e.target === confirmModal) {
    confirmModal.classList.remove('show');
  }
});

// ========== THEMA ==========
document.getElementById('themeBtn').addEventListener('click', () => {
  document.documentElement.classList.toggle('dark');
});

// ========== TAAL ==========
document.getElementById('languageSelect').addEventListener('change', (e) => {
  currentLanguage = e.target.value;
  updateUILanguage();
  
  if (currentSurahId) {
    openSurah(currentSurahId);
  } else {
    loadSurahList();
  }
});

// ========== INIT ==========
updateUILanguage();
loadSurahList();
</script>

</body>
</html>
